# 本地项目适配FastAPI服务器指南

## 📋 改造概览

**服务器地址**: 172.31.179.77:8007  
**框架类型**: FastAPI (异步框架)  
**新增端点**: `/chat` - 对话功能  
**改造状态**: ✅ 服务器端已完成  
**待办事项**: 本地后端适配新的API格式

---

## 🔍 关键变化说明

### 1. 服务器端已实现的功能

#### ✅ 新增 `/chat` 对话端点

**请求格式** (FastAPI Pydantic模型):
```json
{
  "task_id": "string (必填)",
  "conversation_history": [
    {
      "role": "user|assistant",
      "content": "消息内容"
    }
  ],
  "grading_context": {
    "summary": {
      "total_questions": 3,
      "correct_count": 2,
      "accuracy_rate": 0.67
    },
    "grading_result": [
      {
        "question": "题目内容",
        "answer": "学生答案",
        "correct_answer": "正确答案",
        "correct": false,
        "explanation": "错误原因"
      }
    ],
    "wrong_knowledges": ["知识点1", "知识点2"]
  }
}
```

**响应格式**:
```json
{
  "success": true,
  "response": "AI生成的回复内容",
  "context_used": true,
  "timestamp": 1234567890,
  "error": null
}
```

---

## 🛠️ 本地后端适配步骤

### 步骤 1: 检查本地后端文件

首先找到你的本地后端主文件，通常是：
- `app.py` 
- `server.py`
- `main.py`
- 或其他Flask/FastAPI应用文件

<function_calls>
<invoke name="run_terminal_cmd">
<parameter name="command">find /home/cshcsh -maxdepth 3 -type f \( -name "app.py" -o -name "server.py" -o -name "main.py" \) 2>/dev/null | grep -E "(homework|exam|grade|批改|ai)" | head -10
