# æœåŠ¡å™¨ç«¯Qwen3:30Bè‡ªåŠ¨åŒ–é…ç½®æŒ‡å—

> è¿™ä¸ªæ–‡æ¡£ä¸“é—¨ä¸ºæœåŠ¡å™¨ç«¯çš„Cursor AIåŠ©æ‰‹å‡†å¤‡ï¼ŒåŒ…å«æ‰€æœ‰å¿…è¦çš„é…ç½®å‘½ä»¤å’ŒéªŒè¯æ­¥éª¤ã€‚

## ðŸŽ¯ ä»»åŠ¡ç›®æ ‡
åœ¨æœåŠ¡å™¨ `172.31.179.77` ä¸Šé…ç½®Qwen3:30Bæ¨¡åž‹ï¼Œæä¾›APIæœåŠ¡ç»™è¿œç¨‹å®¢æˆ·ç«¯è°ƒç”¨ã€‚

## ðŸ“‹ æœåŠ¡å™¨ä¿¡æ¯
- **æœåŠ¡å™¨IP**: 172.31.179.77
- **ç”¨æˆ·å**: cshcsh
- **å¯†ç **: Csh061212
- **ç›®æ ‡æ¨¡åž‹**: qwen3:30B
- **æœåŠ¡ç«¯å£**: 11434

## ðŸš€ è‡ªåŠ¨åŒ–é…ç½®æ­¥éª¤

### æ­¥éª¤1: æ£€æŸ¥ç³»ç»ŸçŽ¯å¢ƒ
```bash
# æ£€æŸ¥æ“ä½œç³»ç»Ÿä¿¡æ¯
uname -a
cat /etc/os-release

# æ£€æŸ¥ç£ç›˜ç©ºé—´ï¼ˆqwen3:30Béœ€è¦çº¦20GBç©ºé—´ï¼‰
df -h

# æ£€æŸ¥å†…å­˜ï¼ˆæŽ¨è16GB+ï¼‰
free -h

# æ£€æŸ¥æ˜¯å¦å·²å®‰è£…ollama
which ollama
ollama --version
```

### æ­¥éª¤2: å®‰è£…Ollamaï¼ˆå¦‚æžœæœªå®‰è£…ï¼‰
```bash
# å¦‚æžœollamaæœªå®‰è£…ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤
curl -fsSL https://ollama.ai/install.sh | sh

# éªŒè¯å®‰è£…
ollama --version
```

### æ­¥éª¤3: ä¸‹è½½å’Œé…ç½®Qwen3:30Bæ¨¡åž‹
```bash
# æ£€æŸ¥çŽ°æœ‰æ¨¡åž‹
ollama list

# ä¸‹è½½qwen3:30Bæ¨¡åž‹ï¼ˆè¿™å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ï¼‰
echo "å¼€å§‹ä¸‹è½½qwen3:30Bæ¨¡åž‹ï¼Œé¢„è®¡éœ€è¦10-30åˆ†é’Ÿ..."
ollama pull qwen3:30B

# éªŒè¯æ¨¡åž‹ä¸‹è½½å®Œæˆ
ollama list | grep qwen3:30B
if [ $? -eq 0 ]; then
    echo "âœ… qwen3:30Bæ¨¡åž‹ä¸‹è½½æˆåŠŸ"
else
    echo "âŒ qwen3:30Bæ¨¡åž‹ä¸‹è½½å¤±è´¥"
    exit 1
fi
```

### æ­¥éª¤4: é…ç½®OllamaæœåŠ¡ç›‘å¬å¤–éƒ¨è¿žæŽ¥
```bash
# åœæ­¢å¯èƒ½è¿è¡Œçš„ollamaæœåŠ¡
pkill ollama

# è®¾ç½®çŽ¯å¢ƒå˜é‡ä»¥ç›‘å¬æ‰€æœ‰æŽ¥å£
export OLLAMA_HOST=0.0.0.0:11434

# åˆ›å»ºollamaé…ç½®ç›®å½•
mkdir -p ~/.config/systemd/user

# åˆ›å»ºsystemdæœåŠ¡æ–‡ä»¶
cat > ~/.config/systemd/user/ollama.service << 'EOF'
[Unit]
Description=Ollama Service
After=network.target

[Service]
Type=simple
Environment=OLLAMA_HOST=0.0.0.0:11434
ExecStart=/usr/local/bin/ollama serve
Restart=always
RestartSec=5

[Install]
WantedBy=default.target
EOF

# é‡æ–°åŠ è½½systemdé…ç½®
systemctl --user daemon-reload

# å¯ç”¨å¹¶å¯åŠ¨ollamaæœåŠ¡
systemctl --user enable ollama
systemctl --user start ollama

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
systemctl --user status ollama
```

### æ­¥éª¤5: é…ç½®é˜²ç«å¢™
```bash
# æ£€æŸ¥é˜²ç«å¢™çŠ¶æ€
sudo ufw status

# å¼€æ”¾11434ç«¯å£
sudo ufw allow 11434

# å¦‚æžœä½¿ç”¨iptables
sudo iptables -A INPUT -p tcp --dport 11434 -j ACCEPT
sudo iptables-save > /etc/iptables/rules.v4

# å¦‚æžœä½¿ç”¨firewalld
sudo firewall-cmd --add-port=11434/tcp --permanent
sudo firewall-cmd --reload
```

### æ­¥éª¤6: éªŒè¯æœåŠ¡è¿è¡Œ
```bash
# ç­‰å¾…æœåŠ¡å¯åŠ¨
sleep 10

# æ£€æŸ¥ç«¯å£ç›‘å¬
netstat -tlnp | grep 11434
if [ $? -eq 0 ]; then
    echo "âœ… ç«¯å£11434æ­£åœ¨ç›‘å¬"
else
    echo "âŒ ç«¯å£11434æœªç›‘å¬ï¼Œæ£€æŸ¥æœåŠ¡çŠ¶æ€"
    systemctl --user status ollama
fi

# æµ‹è¯•æœ¬åœ°API
echo "æµ‹è¯•æœ¬åœ°APIè¿žæŽ¥..."
curl -s http://localhost:11434/api/version
if [ $? -eq 0 ]; then
    echo "âœ… æœ¬åœ°APIè¿žæŽ¥æˆåŠŸ"
else
    echo "âŒ æœ¬åœ°APIè¿žæŽ¥å¤±è´¥"
fi
```

### æ­¥éª¤7: æµ‹è¯•æ¨¡åž‹API
```bash
# æµ‹è¯•qwen3:30Bæ¨¡åž‹ç”Ÿæˆ
echo "æµ‹è¯•qwen3:30Bæ¨¡åž‹ç”ŸæˆåŠŸèƒ½..."
curl -X POST http://localhost:11434/api/generate \
  -H "Content-Type: application/json" \
  -d '{
    "model": "qwen3:30B",
    "prompt": "ä½ å¥½ï¼Œè¯·ç”¨ä¸­æ–‡ç®€å•ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±",
    "stream": false,
    "options": {
      "num_predict": 100,
      "temperature": 0.1
    }
  }' | jq '.'

if [ $? -eq 0 ]; then
    echo "âœ… qwen3:30Bæ¨¡åž‹APIæµ‹è¯•æˆåŠŸ"
else
    echo "âŒ qwen3:30Bæ¨¡åž‹APIæµ‹è¯•å¤±è´¥"
fi
```

### æ­¥éª¤8: æµ‹è¯•å¤–éƒ¨è®¿é—®ï¼ˆå¯é€‰ï¼‰
```bash
# èŽ·å–æœåŠ¡å™¨å¤–éƒ¨IP
SERVER_IP=$(curl -s ifconfig.me)
echo "æœåŠ¡å™¨å¤–éƒ¨IP: $SERVER_IP"

# å¦‚æžœæœ‰å…¶ä»–æœåŠ¡å™¨å¯ä»¥æµ‹è¯•å¤–éƒ¨è®¿é—®
echo "å¯ä»¥ä»Žå…¶ä»–æœºå™¨è¿è¡Œä»¥ä¸‹å‘½ä»¤æµ‹è¯•å¤–éƒ¨è®¿é—®ï¼š"
echo "curl http://$SERVER_IP:11434/api/version"
```

### æ­¥éª¤9: æ€§èƒ½ä¼˜åŒ–ï¼ˆå¯é€‰ï¼‰
```bash
# æ£€æŸ¥GPUæ”¯æŒ
nvidia-smi 2>/dev/null
if [ $? -eq 0 ]; then
    echo "âœ… æ£€æµ‹åˆ°GPUï¼Œollamaå°†è‡ªåŠ¨ä½¿ç”¨GPUåŠ é€Ÿ"
else
    echo "â„¹ï¸ æœªæ£€æµ‹åˆ°GPUï¼Œå°†ä½¿ç”¨CPUè¿è¡Œ"
fi

# è®¾ç½®ollamaä½¿ç”¨çš„æœ€å¤§å†…å­˜ï¼ˆä»¥GBä¸ºå•ä½ï¼‰
# export OLLAMA_MAX_LOADED_MODELS=1
# export OLLAMA_NUM_PARALLEL=1
```

### æ­¥éª¤10: åˆ›å»ºç›‘æŽ§è„šæœ¬
```bash
# åˆ›å»ºæœåŠ¡ç›‘æŽ§è„šæœ¬
cat > ~/monitor_ollama.sh << 'EOF'
#!/bin/bash
echo "=== OllamaæœåŠ¡ç›‘æŽ§ ==="
echo "æœåŠ¡çŠ¶æ€:"
systemctl --user status ollama --no-pager

echo -e "\nç«¯å£ç›‘å¬:"
netstat -tlnp | grep 11434

echo -e "\næ¨¡åž‹åˆ—è¡¨:"
ollama list

echo -e "\nç³»ç»Ÿèµ„æº:"
free -h
df -h | grep -E "/$|/home"

echo -e "\næœ€è¿‘æ—¥å¿—:"
journalctl --user -u ollama -n 10 --no-pager
EOF

chmod +x ~/monitor_ollama.sh

echo "ç›‘æŽ§è„šæœ¬å·²åˆ›å»º: ~/monitor_ollama.sh"
echo "è¿è¡Œ ./monitor_ollama.sh æŸ¥çœ‹æœåŠ¡çŠ¶æ€"
```

## ðŸ” æ•…éšœæŽ’é™¤å‘½ä»¤

### æŸ¥çœ‹æ—¥å¿—
```bash
# æŸ¥çœ‹ollamaæœåŠ¡æ—¥å¿—
journalctl --user -u ollama -f

# æŸ¥çœ‹æœ€è¿‘çš„é”™è¯¯
journalctl --user -u ollama -p err
```

### é‡å¯æœåŠ¡
```bash
# é‡å¯ollamaæœåŠ¡
systemctl --user restart ollama

# æ£€æŸ¥é‡å¯åŽçŠ¶æ€
systemctl --user status ollama
```

### æ‰‹åŠ¨å¯åŠ¨ï¼ˆè°ƒè¯•ç”¨ï¼‰
```bash
# åœæ­¢systemdæœåŠ¡
systemctl --user stop ollama

# æ‰‹åŠ¨å¯åŠ¨ï¼ˆå‰å°è¿è¡Œï¼Œä¾¿äºŽè°ƒè¯•ï¼‰
OLLAMA_HOST=0.0.0.0:11434 ollama serve
```

## âœ… éªŒè¯æ¸…å•

å®Œæˆé…ç½®åŽï¼Œè¯·ç¡®è®¤ä»¥ä¸‹é¡¹ç›®ï¼š

- [ ] ollamaæœåŠ¡æ­£åœ¨è¿è¡Œ
- [ ] qwen3:30Bæ¨¡åž‹å·²ä¸‹è½½
- [ ] ç«¯å£11434æ­£åœ¨ç›‘å¬0.0.0.0
- [ ] é˜²ç«å¢™å·²å¼€æ”¾11434ç«¯å£
- [ ] æœ¬åœ°APIæµ‹è¯•æˆåŠŸ
- [ ] æ¨¡åž‹ç”Ÿæˆæµ‹è¯•æˆåŠŸ
- [ ] systemdæœåŠ¡å·²å¯ç”¨ï¼ˆå¼€æœºè‡ªå¯ï¼‰

## ðŸ“ž å®ŒæˆåŽé€šçŸ¥

é…ç½®å®ŒæˆåŽï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. **æœåŠ¡çŠ¶æ€**: `systemctl --user status ollama`
2. **æ¨¡åž‹åˆ—è¡¨**: `ollama list`
3. **ç«¯å£ç›‘å¬**: `netstat -tlnp | grep 11434`
4. **APIæµ‹è¯•ç»“æžœ**: åŒ…å«æ¨¡åž‹å“åº”çš„å®Œæ•´è¾“å‡º

## ðŸš¨ æ³¨æ„äº‹é¡¹

1. **èµ„æºéœ€æ±‚**: qwen3:30Béœ€è¦å¤§çº¦16GBå†…å­˜ï¼Œç¡®ä¿æœåŠ¡å™¨æœ‰è¶³å¤Ÿèµ„æº
2. **ä¸‹è½½æ—¶é—´**: æ¨¡åž‹ä¸‹è½½å¯èƒ½éœ€è¦10-30åˆ†é’Ÿï¼Œå–å†³äºŽç½‘ç»œé€Ÿåº¦
3. **æŒä¹…åŒ–**: ä½¿ç”¨systemdç¡®ä¿æœåŠ¡é‡å¯åŽè‡ªåŠ¨è¿è¡Œ
4. **å®‰å…¨æ€§**: åªåœ¨å†…ç½‘ä½¿ç”¨ï¼Œé¿å…ç›´æŽ¥æš´éœ²åˆ°å…¬ç½‘
5. **ç›‘æŽ§**: å®šæœŸæ£€æŸ¥æœåŠ¡çŠ¶æ€å’Œèµ„æºä½¿ç”¨æƒ…å†µ

## ðŸŽ‰ å®ŒæˆæŒ‡æ ‡

å½“çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºæ—¶ï¼Œè¡¨ç¤ºé…ç½®æˆåŠŸï¼š

```bash
# systemctl --user status ollama
â— ollama.service - Ollama Service
   Loaded: loaded
   Active: active (running)

# ollama list
NAME            ID              SIZE    MODIFIED
qwen3:30B       abcd1234...     20GB    1 minute ago

# curl http://localhost:11434/api/version
{"version":"0.x.x"}

# æ¨¡åž‹æµ‹è¯•è¿”å›žæ­£å¸¸çš„ä¸­æ–‡å“åº”
```

---

**æç¤º**: å°†æ­¤æ–‡æ¡£å‘é€ç»™æœåŠ¡å™¨ç«¯çš„Cursorï¼Œå®ƒå¯ä»¥é€æ­¥æ‰§è¡Œæ‰€æœ‰é…ç½®å‘½ä»¤å¹¶æä¾›æ‰§è¡Œç»“æžœã€‚
